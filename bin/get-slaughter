#!/bin/sh
#
#  Install the slaughter client:
#
#  wget -O - https://raw.github.com/skx/dotfiles/master/bin/get-slaughter | sh
#
#  Probably me-specific.
#
# Steve
# --
#



#
#  Install apt
#
if [ ! -e /etc/apt/sources.list.d/slaughter.list ]; then
    cat > /etc/apt/sources.list.d/slaughter.list <<EOF
#
# Slaughter packages for squeeze
#
deb-src http://packages.steve.org.uk/slaughter/squeeze/ ./
deb     http://packages.steve.org.uk/slaughter/squeeze/ ./

EOF
fi



#
#  Make the configuration directory.
#
mkdir -p /etc/slaughter || true



#
#  If we don't have a conf file, create it.
#
if ( ! -e  /etc/slaughter/slaughter.conf ); then
    cat > /etc/slaughter/slaughter.conf <<EOF
prefix    = rsync://www.steve.org.uk/slaughter
transport = rsync
EOF
fi



#
#  Update the system.
#
apt-get update



#
#  Install the package
#
apt-get install --yes --force-yes slaughter2-client

