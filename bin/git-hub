#!/bin/sh
#
# A simple helper to checkout github repositories.
#
# For example:
#
#     git hub skx/e-comments
#     git hub foo
#
# In the latter case "$USER" is used to complete the name.
#
# Any extra options for the git clone go on the end:
#
#     git hub skx/e-comments /tmp/blah --quiet
#
# By default checkouts happen via HTTPS.  If you prefer to use SSH then you'll
# need to add the "-s" flag.
#
# Steve
# --
#



#
# Is the "-s" command-line flag added?
#
SECURE=0

while getopts ":s" o; do
    case "${o}" in
        s)
            SECURE=1
            ;;
        *)
            ;;
    esac
done
shift $((OPTIND-1))



#
# Get the repository-argument and ensure it was specified.
#
dir=$1
shift

if [ -z "$dir" ]; then
    echo "Usage $0 [-s] repo/name"
    exit 1
fi

#
#  Does it have a "/" in it?
#
if ( echo $dir | grep "/" >/dev/null 2>/dev/null ) ; then
    :
else
    dir="$USER/$dir"
fi


#
#  Now clone.
#
if [ $SECURE = "1" ]; then
    git clone git@github.com:$dir $*
else
    git clone https://github.com/$dir $*
fi