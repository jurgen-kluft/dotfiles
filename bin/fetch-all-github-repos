#!/bin/sh
#
# Fetch all my github repositories, beneath the current
# directory.
#
# TODO: Allow username to be specified.
#
#


if [ ! -z "$1" ]; then
    user=$1
else
    user=skx
fi

#
#  Make a temporary file
#
tmp=$(mktemp)

#
#  Get the list of repos.
#
curl https://api.github.com/users/${user}/repos > "$tmp"

#
#  For each one ..
#
for i in $(grep "ssh_url" "$tmp" | awk -F\" '{print $4}') ; do

    name=$(basename $i .git)

    # if we don't have a local copy, then get it.
    if [ ! -d $name ]; then
        git clone $i
    fi
done


rm "$tmp"
